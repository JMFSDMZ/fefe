<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Doce Brasil — Receitas Estaduais</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">
      <svg class="cupcake-svg" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <g fill="none" stroke="#FF6FA8" stroke-width="2">
          <path d="M12 34c0-7.2 5.8-13 13-13 1.9 0 3.7.4 5.3 1.1C33.3 21.4 35.5 20 38 20c5.5 0 10 4.5 10 10v.5"/>
          <path d="M51 36c0 3.3-1.5 6.3-4 8.3H17c-2.5-2-4-5-4-8.3 0-4.4 3.6-8 8-8h22c4.4 0 8 3.6 8 8z" fill="#FFB6D6" stroke="none"/>
          <path d="M15 44c.8 3 3.6 6 6 6h22c2.4 0 5.2-3 6-6" />
          <circle cx="28" cy="28" r="2" fill="#FFFFFF" stroke="none"/>
          <circle cx="36" cy="24" r="2" fill="#FFFFFF" stroke="none"/>
        </g>
      </svg>
      <div>
        <h1>Doce Brasil — Receitas Estaduais</h1>
        <p class="lead">Receitas clássicas e passo a passo das delícias de cada estado.</p>
      </div>
    </div>
  </header>

  <main>
    <div class="intro">
      <div style="flex:1">
        <h2 style="margin:0 0 6px 0">Explorar doces por estado</h2>
        <p style="margin:0;color:rgba(74,51,64,0.7)">Clique em um estado para ver ingredientes e preparo passo a passo. As receitas são adaptações curtas para uso doméstico.</p>
      </div>
      <div style="text-align:right">
        <span class="tag">Rosa Pastel</span>
        <span class="tag">Receitas rápidas</span>
      </div>
    </div>

    <div class="grid">
      <section class="content" id="recipes">
        <div class="top-bar">
          <h3 style="margin:0">Receitas</h3>
          <input class="search" id="search" placeholder="Pesquisar estado ou doce (ex: Brigadeiro)">
        </div>

        <div class="accordion" id="accordion">
          <!-- Estados e receitas aqui -->
        </div>
      </section>

      <aside class="sidebar">
        <h4>Dicas rápidas</h4>
        <ol>
          <li>Use ingredientes em temperatura ambiente quando indicado.</li>
          <li>Meça com xícaras ou balança para melhores resultados.</li>
          <li>Adapte açúcar e coco conforme sua preferência.</li>
          <li>Quer versão vegana? Troque leite por vegetal e ovos por purê de banana.</li>
        </ol>
      </aside>
    </div>

    <footer>
      © Doce Brasil — Receitas Estaduais • Feito com muito açúcar e carinho
    </footer>
  </main>

  <script>
    document.querySelectorAll('.state button').forEach(btn => {
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', (!expanded).toString());
        const body = btn.nextElementSibling;
        if(body){
          if(body.hidden){ body.hidden = false; btn.querySelector('span:last-child').textContent = '-'; }
          else { body.hidden = true; btn.querySelector('span:last-child').textContent = '+'; }
        }
      });
    });

    const search = document.getElementById('search');
    search.addEventListener('input', () => {
      const q = search.value.toLowerCase();
      document.querySelectorAll('.state').forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(q) ? '' : 'none';
      });
    });
  </script>
</body>
<script>
  // transforma texto em "slug" comparável: sem acentos, minúsculo, espaços -> hífen
  function slugify(text){
    return text
      .normalize('NFD')                 // separa acentos
      .replace(/[\u0300-\u036f]/g, '')  // remove acentos
      .toLowerCase()
      .replace(/[^a-z0-9\s-]/g, '')     // remove caracteres especiais
      .trim()
      .replace(/\s+/g, '-');            // espaços -> hífen
  }

  // mapa de slug -> arquivo HTML (ajuste se renomeou arquivos)
  const mapping = {
    'acre':'acre.html', 'alagoas':'alagoas.html', 'amapa':'amapa.html',
    'amazonas':'amazonas.html', 'bahia':'bahia.html', 'ceara':'ceara.html',
    'distrito-federal':'distrito-federal.html', 'espirito-santo':'espirito-santo.html',
    'goias':'goias.html', 'maranhao':'maranhao.html', 'mato-grosso':'mato-grosso.html',
    'mato-grosso-do-sul':'mato-grosso-do-sul.html', 'minas-gerais':'minas-gerais.html',
    'para':'para.html', 'paraiba':'paraiba.html', 'parana':'parana.html',
    'pernambuco':'pernambuco.html', 'piaui':'piaui.html', 'rio-de-janeiro':'rio-de-janeiro.html',
    'rio-grande-do-norte':'rio-grande-do-norte.html', 'rio-grande-do-sul':'rio-grande-do-sul.html',
    'rondonia':'rondonia.html', 'roraima':'roraima.html', 'santa-catarina':'santa-catarina.html',
    'sao-paulo':'sao-paulo.html', 'sergipe':'sergipe.html', 'tocantins':'tocantins.html'
  };

  // referência ao input (certifique-se que o input tem id="search")
  const input = document.getElementById('search');

  // função que tenta redirecionar; se não encontrar, aplica filtro local
  function tryRedirect(q){
    const slug = slugify(q);
    // Tentativas: slug direto (com hífens)
    if(mapping[slug]){
      window.location.href = mapping[slug];
      return true;
    }

    // fallback 1: sem hífen (ex: "riodejaneiro" -> "rio-de-janeiro")
    const nospace = slug.replace(/-/g, '');
    for(const key in mapping){
      if(key.replace(/-/g,'') === nospace){
        window.location.href = mapping[key];
        return true;
      }
    }

    // fallback 2: aplicar filtro local nas cards (se existirem .state)
    const qLower = q.toLowerCase();
    let anyVisible = false;
    document.querySelectorAll('.state').forEach(card => {
      const text = card.textContent.toLowerCase();
      const visible = text.includes(qLower) || text.includes(slug);
      card.style.display = visible ? '' : 'none';
      if(visible) anyVisible = true;
    });

    if(!anyVisible){
      alert('Estado não encontrado. Verifique a grafia ou pressione Enter para filtrar localmente.');
    }
    return false;
  }

  // se o input não existe, avisa
  if(!input){
    console.warn('Input #search não encontrado — verifique o id do campo de pesquisa.');
  } else {
    // captura Enter (quando não existe <form>)
    input.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        e.preventDefault();
        const q = input.value.trim();
        if(!q) return;
        tryRedirect(q);
      }
    });

    // opcional: se tiver um botão de busca com id="search-btn", também suporta clique
    const btn = document.getElementById('search-btn');
    if(btn){
      btn.addEventListener('click', function(e){
        e.preventDefault();
        const q = input.value.trim();
        if(!q) return;
        tryRedirect(q);
      });
    }
  }
</script>
</html>
